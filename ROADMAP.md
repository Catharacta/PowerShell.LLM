# 🧭 PowerShell.LLM 機能実装ロードマップ

> PowerShell.LLM は、PowerShell から各種 LLM（OpenAI / Ollama / Azure OpenAI など）を統一的に扱うためのモジュールです。  
> このロードマップは「CD/CI を学びながら機能を成長させる」ことを目的としています。

---

## 📘 全体像

| フェーズ | 目的 | カテゴリ | ゴール |
|-----------|------|-----------|--------|
| **① 基礎機能実装** | コア構築 | LLM呼び出し | 各プロバイダーで共通呼び出し可能 |
| **② 拡張機能追加** | 使いやすさ向上 | 設定・テンプレート・ストリーム | 実用レベルのCLI体験 |
| **③ チャット／文脈対応** | 対話管理 | 履歴・セッション保持 | ChatGPT風の会話実現 |
| **④ RAG／外部データ連携** | 知識拡張 | ドキュメント連携・ベクトル検索 | ローカル知識の活用 |
| **⑤ 開発・運用強化** | 品質管理 | CI/CD・ログ・自動リリース | 安定した開発運用基盤 |

---

## 🧩 フェーズ①：基礎機能実装（0〜2か月）

**目的**：LLMを統一インターフェースで呼び出せる基礎を作る。

| 機能 | 内容 | 優先度 |
|------|------|--------|
| ✅ `Invoke-LLM` コマンドレット | 共通エントリーポイント（Prompt→応答取得） | ★★★★★ |
| ✅ Provider 抽象化 | 各プロバイダーを `src/Providers/` に分離（OpenAI, Ollamaなど） | ★★★★★ |
| ✅ エラーハンドリング | HTTPエラー・APIキー未設定時の処理 | ★★★★☆ |
| ✅ 設定管理 | 環境変数 or 設定ファイルでAPIキー保持 | ★★★★☆ |
| ✅ レスポンス整形 | 出力形式を文字列／オブジェクトで返す | ★★★★☆ |
| ✅ ログ／デバッグ | `-Verbose` や `-Debug` でリクエスト確認 | ★★★☆☆ |

📘 **成果物**
- `Invoke-LLM` が複数プロバイダーで動作  
- Pesterテスト通過  
- README + 基本サンプル作成

---

## 🧩 フェーズ②：拡張機能追加（2〜4か月）

**目的**：ユーザー体験を強化し、柔軟な操作を可能にする。

| 機能 | 内容 | 優先度 |
|------|------|--------|
| 🔹 ストリーミング出力 | `-Stream` オプション対応 | ★★★★★ |
| 🔹 モデル一覧取得 | `Get-LLMModels` コマンド | ★★★★☆ |
| 🔹 プロンプトテンプレート | JSONテンプレートからプロンプト呼び出し | ★★★★☆ |
| 🔹 出力フォーマット | `-AsJson`, `-AsMarkdown` など | ★★★☆☆ |
| 🔹 APIリトライ／制御 | 再試行・レート制御対応 | ★★★☆☆ |
| 🔹 設定コマンドレット | `Set-LLMConfig`, `Get-LLMConfig` | ★★★☆☆ |

📘 **成果物**
- ユーザーフレンドリーなCLI  
- テンプレートを利用したプロンプト再現

---

## 🧩 フェーズ③：チャット／文脈対応（4〜6か月）

**目的**：PowerShell上での対話的なセッションを実現。

| 機能 | 内容 | 優先度 |
|------|------|--------|
| 🟩 セッション管理 | `New-LLMSession`, `Add-LLMMessage`, `Invoke-LLMChat` | ★★★★★ |
| 🟩 永続メモリ | 履歴をJSONとして保存・再利用 | ★★★★☆ |
| 🟩 役割定義 | system / user / assistant のロール管理 | ★★★★☆ |
| 🟩 チャットUI整形 | 履歴出力の可視化 | ★★★☆☆ |
| 🟩 コンテキスト制限 | トークン数制限・履歴切り捨て | ★★★☆☆ |

📘 **成果物**
- ChatGPT風のセッションがPowerShell内で可能  
- 履歴保存／再開対応

---

## 🧩 フェーズ④：RAG／外部データ連携（6〜9か月）

**目的**：ファイルやドキュメントを利用した知識拡張。

| 機能 | 内容 | 優先度 |
|------|------|--------|
| 🟨 ドキュメント読込 | `Add-LLMContext -Path ./docs/*.md` | ★★★★★ |
| 🟨 ベクトル検索 | FAISS/Chroma連携 | ★★★★☆ |
| 🟨 RAG対応 | 検索→文脈結合→生成 | ★★★★☆ |
| 🟨 ファイル解析 | CSV/JSON/Markdown入力対応 | ★★★☆☆ |
| 🟨 プロンプトチェーン | 生成→次入力に渡す | ★★★☆☆ |

📘 **成果物**
- RAGパイプラインの体験可能  
- ローカル知識を活用したLLM応答

---

## 🧩 フェーズ⑤：開発・運用向け機能（9〜12か月）

**目的**：品質維持と自動化されたリリース体制を整備。

| 機能 | 内容 | 優先度 |
|------|------|--------|
| 🟥 ログ・監査 | 実行履歴をローカル保存 | ★★★★★ |
| 🟥 コストトラッキング | トークン数／コスト出力 | ★★★★☆ |
| 🟥 設定GUI | GUIベース設定編集 | ★★★☆☆ |
| 🟥 CI/CD自動化 | GitHub Actions でテスト＋公開 | ★★★★☆ |
| 🟥 Linter統合 | `Invoke-ScriptAnalyzer` | ★★★★☆ |
| 🟥 セマンティックリリース | タグ→CHANGELOG自動生成 | ★★★☆☆ |

📘 **成果物**
- 自動テスト＋リリース運用確立  
- コスト・ログ可視化による保守体制完成

---

## 📅 開発スケジュール（例：1年間プラン）

| 期間 | フェーズ | 主な成果物 |
|------|-----------|-------------|
| 0〜2か月 | 基礎機能実装 | Invoke-LLM 動作、OpenAI/Ollama対応 |
| 2〜4か月 | 拡張機能追加 | 設定・テンプレート・ストリーム出力 |
| 4〜6か月 | チャット対応 | セッション保持・履歴管理 |
| 6〜9か月 | RAG実装 | ファイル連携・知識統合 |
| 9〜12か月 | 運用強化 | CI/CD・コスト管理・自動リリース |

---

## 🧠 実装順序（階層構造）
(1) コア呼び出し層 → (2) ユーザー補助層 → (3) チャット層
↓ ↓
(4) 知識連携層（RAG） → (5) 運用・CI/CD層


---

## ✨ まとめ

- **フェーズ①〜③**：PowerShell開発者向けの便利な LLM クライアントを構築  
- **フェーズ④〜⑤**：外部知識連携・CI/CD による持続的品質改善を実現  
- 各フェーズ終了ごとにテスト／CIを導入し、CD/CIスキルを習得する

---

📄 次ステップ案：
- このロードマップをもとに **GitHub Projects のマイルストーン & Issue テンプレート** を生成
- CI/CD用の `.github/workflows/test.yml` 雛形を追加
